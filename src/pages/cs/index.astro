---

import Layout from '../../layouts/Layout.astro';
import ArgumentCard from '../../components/ArgumentCard.svelte';
import Testimonial from '../../components/Testimonial.svelte';
import MainCTA from '../../components/MainCTA.svelte';
import FAQ from '../../components/FAQ.svelte';
import Footer from '../../components/Footer.svelte';
import { getLangFromUrl, getTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = getTranslations(lang);

const snapchatUsername = "your_snapchat";
const telegramUsername = "your_telegram";

// Reduced to core marketing arguments
const marketingArgs = [
  {
    emoji: "ðŸ’–",
    title: "Genuine Connections",
    description: "Experience real connections in a judgment-free space",
    buttonText: "Connect Now",
    target: "_blank", // Add required target prop
  },
  {
    emoji: "ðŸ”’",
    title: "100% Private",
    description: "Your privacy and discretion are guaranteed",
    buttonText: "Our Promise",
    target: "_blank",
  },
  {
    emoji: "âœ¨",
    title: "Professional Care",
    description: "Expert guidance throughout your journey",
    buttonText: "Learn More",
    target: "_blank",
  }
];

// Single impactful testimonial
const testimonial = {
  id: '1',
  avatar: 'https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/avatars/8b/8ba5a58e631e40f1eeac75dfc1caf7d40cb4f1eb_full.jpg',
  name: 'Sophie',
  age: 24,
  location: 'Paris',
  quote: 'This platform helped me explore my desires in a safe and comfortable environment. The professional approach made all the difference.',
  rating: 5,
  verified: true,
  activeTime: 'Active Now'
};

const faqs = [
  {
    question: "How does it work?",
    answer: "Connect with us on Snapchat for a casual chat about your interests. We'll guide you through the rest."
  },
  {
    question: "Is my privacy protected?",
    answer: "Absolutely. We ensure all interactions are completely confidential."
  },
  {
    question: "How do I get started?",
    answer: "Simply add us on Snapchat and send us a message. We'll take care of the rest!"
  }
];
---

<Layout title={t.nav.logo}>
  <!-- Optimized Hero Section -->
  <section class="min-h-[80vh] md:min-h-screen flex items-center justify-center px-4 py-12 md:py-20">
    <div class="hero-content text-center max-w-3xl mx-auto">
      <h1 class="text-3xl md:text-6xl font-bold text-pink-100 mb-4 md:mb-6 animate-fade-in">
        Your Journey to Self-Discovery
      </h1>
      <p class="text-lg md:text-2xl text-pink-200/90 leading-relaxed mb-6 md:mb-8 animate-fade-in-delay">
        Experience genuine connections in a safe, welcoming space designed for you
      </p>
      <MainCTA
        client:visible
        snapchatUsername={snapchatUsername}
        telegramUsername={telegramUsername}
        title="Start Your Journey"
        subtitle="Join thousands experiencing genuine connections"
      />
    </div>
  </section>

  <!-- Key Benefits -->
  <section class="py-12 md:py-20 bg-pink-900/5">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto">
        {marketingArgs.map((arg) => (
          <div class="transform transition-all duration-300 hover:-translate-y-1">
            <ArgumentCard {...arg} client:visible />
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Social Proof -->
  <section class="py-12 md:py-20">
    <div class="container mx-auto px-4">
      <Testimonial testimonials={[testimonial]} client:visible />
    </div>
  </section>

  <!-- Collapsible FAQ -->
  <details class="container mx-auto px-4 py-8 md:py-12 max-w-3xl group">
    <summary class="text-2xl md:text-3xl font-light text-pink-100 cursor-pointer text-center mb-6 list-none">
      <div class="flex items-center justify-center gap-2">
        Frequently Asked Questions
        <svg
          class="w-6 h-6 transform transition-transform duration-300 group-open:rotate-180"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </div>
    </summary>
    <FAQ {faqs} client:idle />
  </details>

  <!-- Final CTA -->
  <section class="py-12 md:py-20 bg-gradient-to-b from-pink-900/20 to-transparent">
    <div class="container mx-auto px-4">
      <MainCTA
        client:idle
        snapchatUsername={snapchatUsername}
        telegramUsername={telegramUsername}
        title="Ready to Connect?"
        subtitle="Start your journey today"
      />
    </div>
  </section>

  <Footer
    {snapchatUsername}
    {telegramUsername}
    client:idle
  />
</Layout>

<script>
  // Floating CTA and Back to Top functionality
  const backToTop = document.getElementById('backToTop');
  const floatingCTA = document.getElementById('floatingCTA');
  let lastScroll = 0;

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;

    if (currentScroll > 500) {
      backToTop?.classList.remove('opacity-0');
      backToTop?.classList.add('opacity-100');
    } else {
      backToTop?.classList.remove('opacity-100');
      backToTop?.classList.add('opacity-0');
    }

    if (currentScroll > lastScroll) {
      floatingCTA?.classList.add('translate-y-20');
    } else {
      floatingCTA?.classList.remove('translate-y-20');
    }
    lastScroll = currentScroll;
  });
</script>
